# KTRDR Environment Variables Example
# ====================================
# Copy this file to .env and modify as needed.
# All KTRDR-specific variables use the KTRDR_* prefix.
#
# This file documents the new naming convention established in the config system
# migration (M1-M6). Deprecated names still work but emit warnings at startup.

# =============================================================================
# API SERVER SETTINGS (prefix: KTRDR_API_)
# =============================================================================
KTRDR_API_TITLE="KTRDR API"
KTRDR_API_DESCRIPTION="REST API for KTRDR trading system"
KTRDR_API_VERSION="1.0.5"
KTRDR_API_HOST="127.0.0.1"
KTRDR_API_PORT="8000"
KTRDR_API_RELOAD="True"
KTRDR_API_ENVIRONMENT="development"  # development | staging | production
KTRDR_API_API_PREFIX="/api/v1"

# CORS configuration
KTRDR_API_CORS_ORIGINS="*"
# For multiple origins, use comma-separated values:
# KTRDR_API_CORS_ORIGINS="http://localhost:3000,http://localhost:8080"
KTRDR_API_CORS_ALLOW_CREDENTIALS="True"
KTRDR_API_CORS_ALLOW_METHODS="*"
KTRDR_API_CORS_ALLOW_HEADERS="*"
KTRDR_API_CORS_MAX_AGE="600"

# =============================================================================
# API CLIENT SETTINGS (prefix: KTRDR_API_CLIENT_)
# Used by CLI and workers to connect to the backend API
# =============================================================================
KTRDR_API_CLIENT_BASE_URL="http://localhost:8000/api/v1"
KTRDR_API_CLIENT_TIMEOUT="30.0"
KTRDR_API_CLIENT_MAX_RETRIES="3"
KTRDR_API_CLIENT_RETRY_DELAY="1.0"

# =============================================================================
# DATABASE SETTINGS (prefix: KTRDR_DB_)
# PostgreSQL + TimescaleDB connection
# =============================================================================
KTRDR_DB_HOST="localhost"
KTRDR_DB_PORT="5432"
KTRDR_DB_NAME="ktrdr"
KTRDR_DB_USER="ktrdr"
KTRDR_DB_PASSWORD="localdev"  # CHANGE IN PRODUCTION!
KTRDR_DB_ECHO="false"  # Enable SQLAlchemy echo mode for debugging

# =============================================================================
# AUTHENTICATION SETTINGS (prefix: KTRDR_AUTH_)
# =============================================================================
KTRDR_AUTH_JWT_SECRET="local-dev-secret-minimum-32-characters-long"  # CHANGE IN PRODUCTION!
KTRDR_AUTH_JWT_ALGORITHM="HS256"
KTRDR_AUTH_TOKEN_EXPIRE_MINUTES="60"

# =============================================================================
# LOGGING SETTINGS (prefix: KTRDR_LOG_)
# =============================================================================
KTRDR_LOG_LEVEL="INFO"  # DEBUG | INFO | WARNING | ERROR | CRITICAL
KTRDR_LOG_FORMAT="%(asctime)s [%(levelname)s] %(name)s: %(message)s"
KTRDR_LOG_JSON_OUTPUT="false"

# =============================================================================
# OBSERVABILITY SETTINGS (prefix: KTRDR_OTEL_)
# OpenTelemetry/Jaeger tracing
# =============================================================================
KTRDR_OTEL_ENABLED="true"
KTRDR_OTEL_OTLP_ENDPOINT="http://jaeger:4317"
KTRDR_OTEL_SERVICE_NAME="ktrdr"
KTRDR_OTEL_CONSOLE_OUTPUT="false"

# =============================================================================
# CHECKPOINT SETTINGS (prefix: KTRDR_CHECKPOINT_)
# For long-running operations like training
# =============================================================================
KTRDR_CHECKPOINT_EPOCH_INTERVAL="10"
KTRDR_CHECKPOINT_TIME_INTERVAL_SECONDS="300"
KTRDR_CHECKPOINT_DIR="/app/data/checkpoints"
KTRDR_CHECKPOINT_MAX_AGE_DAYS="30"

# =============================================================================
# IB HOST SERVICE SETTINGS (prefix: KTRDR_IB_HOST_)
# Connection to IB Gateway via host service (runs natively on Mac)
# =============================================================================
KTRDR_IB_HOST_ENABLED="true"
KTRDR_IB_HOST_HOST="localhost"
KTRDR_IB_HOST_PORT="5001"
KTRDR_IB_HOST_TIMEOUT="30.0"

# =============================================================================
# WORKER SETTINGS (prefix: KTRDR_WORKER_)
# For backtesting and training workers
# =============================================================================
# KTRDR_WORKER_ID=  # Auto-generated if not set
KTRDR_WORKER_PORT="5003"
KTRDR_WORKER_HEARTBEAT_INTERVAL="30"
KTRDR_WORKER_REGISTRATION_TIMEOUT="10"
# KTRDR_WORKER_PUBLIC_BASE_URL=  # Auto-detected if not set

# =============================================================================
# AGENT SETTINGS (prefix: KTRDR_AGENT_)
# AI research agent configuration
# =============================================================================
# NOTE: KTRDR_AGENT_ENABLED is a placeholder for future agent auto-trigger
# functionality. Currently agents are triggered via API, not automatically.
KTRDR_AGENT_ENABLED="false"
KTRDR_AGENT_MODEL="claude-sonnet-4-20250514"
KTRDR_AGENT_MAX_TOKENS="4096"
KTRDR_AGENT_TIMEOUT_SECONDS="300"
KTRDR_AGENT_DAILY_BUDGET="5.0"

# =============================================================================
# THIRD-PARTY SETTINGS (not KTRDR-prefixed)
# These are for external services that use their own naming conventions
# =============================================================================
# Anthropic API key for AI agents
# ANTHROPIC_API_KEY=

# Grafana admin password
# GF_ADMIN_PASSWORD=admin

# Discord webhook for notifications
# DISCORD_WEBHOOK_URL=