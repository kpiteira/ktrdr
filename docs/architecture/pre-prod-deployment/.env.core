# =============================================================================
# KTRDR Core Stack Configuration
# =============================================================================
# This file contains NON-SECRET configuration for the core stack
# Safe to commit to git - NO SECRETS HERE
#
# Secrets (DB_PASSWORD, JWT_SECRET, etc.) are injected by deployment CLI
# See ENV_VARS.md for complete reference
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
DB_HOST=db
DB_PORT=5432
DB_NAME=ktrdr

# DB_USER and DB_PASSWORD are SECRETS - injected by CLI at deploy time

# -----------------------------------------------------------------------------
# Backend API Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
KTRDR_API_HOST=0.0.0.0
KTRDR_API_PORT=8000
ENVIRONMENT=homelab
LOG_LEVEL=INFO
SHARED_MOUNT_PATH=/mnt/shared

# JWT_SECRET is a SECRET - injected by CLI at deploy time

# -----------------------------------------------------------------------------
# Observability Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
OTLP_ENDPOINT=http://jaeger:4317

# Enable anonymous Grafana access (homelab only - disable for production!)
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Admin

# GF_ADMIN_PASSWORD is a SECRET - injected by CLI at deploy time

# -----------------------------------------------------------------------------
# Container Registry Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
# IMAGE_TAG is set by deployment CLI based on git SHA
# Default to 'latest' if not specified
IMAGE_TAG=latest

# =============================================================================
# Deployment Notes
# =============================================================================
# This file is safe to commit to git (contains no secrets)
#
# Secrets are injected at deploy time:
#   ktrdr deploy core all
#     ├─> Fetches secrets from 1Password
#     └─> Injects inline: DB_PASSWORD=... JWT_SECRET=... GF_ADMIN_PASSWORD=...
#
# Docker compose reads this .env file for non-secret config, and receives
# secrets as inline environment variables from the deployment command.
# =============================================================================
