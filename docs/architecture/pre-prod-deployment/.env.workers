# =============================================================================
# KTRDR Worker Stack Configuration
# =============================================================================
# This file contains NON-SECRET configuration for worker stacks
# Safe to commit to git - NO SECRETS HERE
#
# Secrets (DB_PASSWORD) are injected by deployment CLI
# See ENV_VARS.md for complete reference
#
# IMPORTANT: Customize WORKER_HOSTNAME for each node (B, C, D, etc.)
# =============================================================================

# -----------------------------------------------------------------------------
# Worker Node Identification (CUSTOMIZE PER NODE)
# -----------------------------------------------------------------------------
# Change this based on which node this is deployed on:
#   Node B: workers-b.ktrdr.home.mynerd.place
#   Node C: workers-c.ktrdr.home.mynerd.place
#   Node D: workers-d.ktrdr.home.mynerd.place
WORKER_HOSTNAME=workers-b.ktrdr.home.mynerd.place

# -----------------------------------------------------------------------------
# Backend API Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
KTRDR_API_URL=http://backend.ktrdr.home.mynerd.place:8000

# -----------------------------------------------------------------------------
# Shared Storage Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
SHARED_MOUNT_PATH=/mnt/shared

# -----------------------------------------------------------------------------
# Database Access (NON-SECRET)
# -----------------------------------------------------------------------------
# Workers need DB access for checkpointing
DB_HOST=backend.ktrdr.home.mynerd.place
DB_PORT=5432
DB_NAME=ktrdr

# DB_USER and DB_PASSWORD are SECRETS - injected by CLI at deploy time

# -----------------------------------------------------------------------------
# Observability Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
OTLP_ENDPOINT=http://backend.ktrdr.home.mynerd.place:4317

# -----------------------------------------------------------------------------
# Container Registry Configuration (NON-SECRET)
# -----------------------------------------------------------------------------
# IMAGE_TAG is set by deployment CLI based on git SHA
IMAGE_TAG=latest

# =============================================================================
# Node-Specific Deployment Examples
# =============================================================================
#
# For Node B (copy this file to ktrdr-workers-b LXC):
#   WORKER_HOSTNAME=workers-b.ktrdr.home.mynerd.place
#
# For Node C (copy this file to ktrdr-workers-c LXC):
#   WORKER_HOSTNAME=workers-c.ktrdr.home.mynerd.place
#
# For Node D (copy this file to ktrdr-workers-d LXC):
#   WORKER_HOSTNAME=workers-d.ktrdr.home.mynerd.place
#
# =============================================================================
# Deployment Notes
# =============================================================================
# This file is safe to commit to git (contains no secrets)
#
# Secrets are injected at deploy time:
#   ktrdr deploy workers B
#     ├─> Fetches DB secrets from 1Password
#     └─> Injects inline: DB_USER=... DB_PASSWORD=...
#
# Docker compose reads this .env file for non-secret config, and receives
# secrets as inline environment variables from the deployment command.
# =============================================================================
